<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لعبتي عقيل خالد </title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');

        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-light: #f0f0f0;
            --background-dark: #2c3e50;
            --text-light: #333;
            --text-dark: #ecf0f1;
            --neumorphic-light: #ffffff;
            --neumorphic-dark: #1a2639;
        }

        body {
            font-family: 'Tajawal', Arial, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        .neumorphic {
            border-radius: 20px;
            background: var(--neumorphic-light);
            box-shadow: 8px 8px 15px #d1d9e6, -8px -8px 15px #ffffff;
            transition: all 0.3s ease;
        }

        .dark .neumorphic {
            background: var(--neumorphic-dark);
            box-shadow: 5px 5px 10px #131c2b, -5px -5px 10px #212f47;
        }

        .btn {
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(50,50,93,.11), 0 1px 3px rgba(0,0,0,.08);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .bounce {
            animation: bounce 0.5s;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .shake {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .progress-bar {
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background-color: var(--primary-color);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 min-h-screen flex items-center justify-center transition-all duration-300">
    <div id="game-container" class="neumorphic p-8 w-full max-w-lg">
        <h1 class="text-3xl font-bold mb-6 text-center">لعبتي عقيل خالد ة</h1>
        
        <div id="difficulty-selector" class="mb-4 flex justify-center">
            <button class="btn bg-green-500 text-white px-4 py-2 rounded-lg mx-2" data-difficulty="easy">سهل</button>
            <button class="btn bg-yellow-500 text-white px-4 py-2 rounded-lg mx-2" data-difficulty="medium">متوسط</button>
            <button class="btn bg-red-500 text-white px-4 py-2 rounded-lg mx-2" data-difficulty="hard">صعب</button>
            <button class="btn bg-purple-500 text-white px-4 py-2 rounded-lg mx-2" data-difficulty="expert">خبير</button>
        </div>
        
        <div id="game-mode-selector" class="mb-4 flex justify-center">
            <button class="btn bg-blue-500 text-white px-4 py-2 rounded-lg mx-2" data-mode="normal">عادي</button>
            <button class="btn bg-orange-500 text-white px-4 py-2 rounded-lg mx-2" data-mode="timeAttack">ضد الزمن</button>
            <button class="btn bg-pink-500 text-white px-4 py-2 rounded-lg mx-2" data-mode="survival">البقاء</button>
        </div>

        <div id="word-display" class="text-2xl font-bold mb-4 h-12 flex items-center justify-center"></div>
        <input type="text" id="translation-input" class="w-full p-2 mb-4 rounded-lg border-2 border-gray-300 focus:border-blue-500 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="أدخل الترجمة هنا">
        <div class="flex justify-between mb-4">
            <button id="submit-btn" class="btn bg-green-500 text-white px-6 py-2 rounded-lg">تحقق</button>
            <button id="hint-btn" class="btn bg-yellow-500 text-white px-6 py-2 rounded-lg">تلميح</button>
            <button id="listen-btn" class="btn bg-blue-500 text-white px-6 py-2 rounded-lg">استمع</button>
        </div>
        <button id="start-btn" class="btn bg-blue-500 text-white px-6 py-2 rounded-lg w-full mb-4">ابدأ اللعبة</button>
        <div class="flex justify-between mb-4">
            <div id="score" class="text-xl">النتيجة: 0</div>
            <div id="timer" class="text-xl">الوقت: 60 ثانية</div>
        </div>
        <div id="streak" class="text-center mb-4 text-lg font-bold text-green-500"></div>
        <div id="progress-container" class="mb-4">
            <div class="progress-bar">
                <div id="progress" class="progress" style="width: 0%"></div>
            </div>
        </div>
        <div id="leaderboard" class="mt-4">
            <h2 class="text-xl font-bold mb-2">أفضل النتائج</h2>
            <ol id="leaderboard-list" class="list-decimal list-inside"></ol>
        </div>
        <div id="achievements" class="mt-4">
            <h2 class="text-xl font-bold mb-2">الإنجازات</h2>
            <ul id="achievements-list" class="list-disc list-inside"></ul>
        </div>
        <button id="theme-toggle" class="mt-4 bg-gray-300 dark:bg-gray-600 text-gray-800 dark:text-white px-4 py-2 rounded-lg">تبديل الوضع الداكن</button>
        <button id="share-btn" class="mt-4 bg-blue-500 text-white px-4 py-2 rounded-lg">مشاركة النتيجة</button>
        <button id="custom-words-btn" class="mt-4 bg-purple-500 text-white px-4 py-2 rounded-lg">إضافة كلمات مخصصة</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    <script>
        const words = [
            { ar: "مرحبًا", en: "hello" },
            { ar: "شكرًا لك", en: "thank you" },
            { ar: "من فضلك", en: "please" },
            { ar: "آسف", en: "sorry" },
            { ar: "نعم", en: "yes" },
            { ar: "لا", en: "no" },
            { ar: "صباح الخير", en: "good morning" },
            { ar: "تصبح على خير", en: "good night" },
            { ar: "وداعًا", en: "goodbye" },
            { ar: "مساعدة", en: "help" },
            { ar: "صديق", en: "friend" },
            { ar: "طعام", en: "food" },
            { ar: "ماء", en: "water" },
            { ar: "حب", en: "love" },
            { ar: "سعيد", en: "happy" },
            { ar: "حزين", en: "sad" },
            { ar: "عائلة", en: "family" },
            { ar: "عمل", en: "work" },
            { ar: "مدرسة", en: "school" },
            { ar: "منزل", en: "home" },
            { ar: "مال", en: "money" },
            { ar: "سيارة", en: "car" },
            { ar: "وقت", en: "time" },
            { ar: "اليوم", en: "today" },
            { ar: "غدًا", en: "tomorrow" },
            { ar: "أمس", en: "yesterday" },
            { ar: "جميل", en: "beautiful" },
            { ar: "مهم", en: "important" },
            { ar: "مشكلة", en: "problem" },
            { ar: "صداقة", en: "friendship" },
            { ar: "كلب", en: "dog" },
            { ar: "قطة", en: "cat" },
            { ar: "عيد ميلاد سعيد", en: "happy birthday" },
            { ar: "شمس", en: "sun" },
            { ar: "قمر", en: "moon" },
            { ar: "نجم", en: "star" },
            { ar: "سماء", en: "sky" },
            { ar: "أرض", en: "earth" },
            { ar: "ريح", en: "wind" },
            { ar: "مطر", en: "rain" },
            { ar: "ثلج", en: "snow" },
            { ar: "جبل", en: "mountain" },
            { ar: "نهر", en: "river" },
            { ar: "محيط", en: "ocean" },
            { ar: "بحيرة", en: "lake" },
            { ar: "شجرة", en: "tree" },
            { ar: "زهرة", en: "flower" },
            { ar: "حديقة", en: "garden" },
            { ar: "بيت", en: "house" },
            { ar: "باب", en: "door" },
            { ar: "نافذة", en: "window" },
            { ar: "غرفة", en: "room" },
            { ar: "كرسي", en: "chair" },
            { ar: "طاولة", en: "table" },
            { ar: "سرير", en: "bed" },
            { ar: "كتاب", en: "book" },
            { ar: "قلم", en: "pen" },
            { ar: "ورقة", en: "paper" },
            { ar: "هاتف", en: "phone" },
            { ar: "كمبيوتر", en: "computer" },
            { ar: "إنترنت", en: "internet" },
            { ar: "بريد إلكتروني", en: "email" },
            { ar: "رسالة", en: "message" },
            { ar: "مكالمة", en: "call" },
            { ar: "رقم", en: "number" },
            { ar: "واحد", en: "one" },
            { ar: "اثنان", en: "two" },
            { ar: "ثلاثة", en: "three" },
            { ar: "أربعة", en: "four" },
            { ar: "خمسة", en: "five" },
            { ar: "ستة", en: "six" },
            { ar: "سبعة", en: "seven" },
            { ar: "ثمانية", en: "eight" },
            { ar: "تسعة", en: "nine" },
            { ar: "عشرة", en: "ten" },
            { ar: "أب", en: "father" },
            { ar: "أم", en: "mother" },
            { ar: "أخ", en: "brother" },
            { ar: "أخت", en: "sister" },
            { ar: "ابن", en: "son" },
            { ar: "ابنة", en: "daughter" },
            { ar: "عم/خال", en: "uncle" },
            { ar: "عمة/خالة", en: "aunt" },
            { ar: "ابن/ابنة عم أو خال", en: "cousin" },
            { ar: "جد", en: "grandfather" },
            { ar: "جدة", en: "grandmother" },
            { ar: "طفل", en: "baby" },
            { ar: "طفل", en: "child" },
            { ar: "ولد", en: "boy" },
            { ar: "بنت", en: "girl" },
            { ar: "رجل", en: "man" },
            { ar: "امرأة", en: "woman" },
            { ar: "قديم/كبير في السن", en: "old" },
            { ar: "شاب", en: "young" },
            { ar: "كبير", en: "big" },
            { ar: "صغير", en: "small" },
            { ar: "سريع", en: "fast" },
            { ar: "بطيء", en: "slow" },
                        { ar: "حار", en: "hot" },
            { ar: "بارد", en: "cold" },
            { ar: "صيف", en: "summer" },
            { ar: "شتاء", en: "winter" },
            { ar: "ربيع", en: "spring" },
            { ar: "خريف", en: "autumn" },
            { ar: "يوم", en: "day" },
            { ar: "ليل", en: "night" },
            { ar: "صباح", en: "morning" },
            { ar: "مساء", en: "evening" },
            { ar: "أسبوع", en: "week" },
            { ar: "شهر", en: "month" },
            { ar: "سنة", en: "year" },
            { ar: "ساعة", en: "clock" },
            { ar: "دقيقة", en: "minute" },
            { ar: "ثانية", en: "second" },
            { ar: "إفطار", en: "breakfast" },
            { ar: "غداء", en: "lunch" },
            { ar: "عشاء", en: "dinner" },
            { ar: "قهوة", en: "coffee" },
            { ar: "شاي", en: "tea" },
            { ar: "عصير", en: "juice" },
            { ar: "حليب", en: "milk" },
            { ar: "خبز", en: "bread" },
            { ar: "أرز", en: "rice" },
            { ar: "لحم", en: "meat" },
            { ar: "دجاج", en: "chicken" },
            { ar: "سمك", en: "fish" },
            { ar: "خضار", en: "vegetable" },
            { ar: "فاكهة", en: "fruit" },
            { ar: "تفاح", en: "apple" },
            { ar: "موز", en: "banana" },
            { ar: "برتقال", en: "orange" },
            { ar: "عنب", en: "grape" },
            { ar: "جزر", en: "carrot" },
            { ar: "بطاطس", en: "potato" },
            { ar: "بصل", en: "onion" },
            { ar: "ثوم", en: "garlic" },
            { ar: "ملح", en: "salt" },
            { ar: "فلفل", en: "pepper" },
            { ar: "سكر", en: "sugar" },
            { ar: "زيت", en: "oil" },
            { ar: "زبدة", en: "butter" },
            { ar: "بيضة", en: "egg" },
            { ar: "كعكة", en: "cake" },
            { ar: "شوكولاتة", en: "chocolate" },
            { ar: "حلوى", en: "candy" },
            { ar: "آيس كريم", en: "ice cream" },
            { ar: "بسكويت", en: "biscuit" },
            { ar: "عصير", en: "juice" },
            { ar: "حساء", en: "soup" },
            { ar: "سكين", en: "knife" },
            { ar: "شوكة", en: "fork" },
            { ar: "ملعقة", en: "spoon" },
            { ar: "طبق", en: "plate" },
            { ar: "كوب", en: "glass" },
            { ar: "زجاجة", en: "bottle" },
            { ar: "فنجان", en: "cup" },
            { ar: "حقيبة", en: "bag" },
            { ar: "قميص", en: "shirt" },
            { ar: "بنطال", en: "pants" },
            { ar: "فستان", en: "dress" },
            { ar: "حذاء", en: "shoes" },
            { ar: "قبعة", en: "hat" },
            { ar: "جوارب", en: "socks" },
            { ar: "سترة", en: "jacket" },
            { ar: "معطف", en: "coat" },
            { ar: "قفازات", en: "gloves" },
            { ar: "وشاح", en: "scarf" },
            { ar: "ربطة عنق", en: "tie" },
            { ar: "حزام", en: "belt" },
            { ar: "ساعة يد", en: "watch" },
            { ar: "خاتم", en: "ring" },
            { ar: "عقد", en: "necklace" },
            { ar: "سوار", en: "bracelet" },
            { ar: "أقراط", en: "earrings" },
            { ar: "مكياج", en: "makeup" },
            { ar: "شامبو", en: "shampoo" },
            { ar: "صابون", en: "soap" },
            { ar: "معجون أسنان", en: "toothpaste" },
            { ar: "فرشاة أسنان", en: "toothbrush" },
            { ar: "مشط", en: "comb" },
            { ar: "مرآة", en: "mirror" },
            { ar: "منشفة", en: "towel" },
            { ar: "سرير", en: "bed" },
            { ar: "وسادة", en: "pillow" },
            { ar: "بطانية", en: "blanket" },
            { ar: "باب", en: "door" },
            { ar: "نافذة", en: "window" },
            { ar: "أرضية", en: "floor" },
            { ar: "سقف", en: "ceiling" },
            { ar: "حائط", en: "wall" },
            { ar: "مطبخ", en: "kitchen" },
            { ar: "حمام", en: "bathroom" },
            { ar: "غرفة نوم", en: "bedroom" },
            { ar: "غرفة جلوس", en: "living room" },
            { ar: "تلفاز", en: "television" },
            { ar: "راديو", en: "radio" },
            { ar: "موسيقى", en: "music" },
            { ar: "فيلم", en: "movie" },
            { ar: "لعبة", en: "game" },
            { ar: "رياضة", en: "sport" },
            { ar: "جري", en: "run" },
            { ar: "مشي", en: "walk" },
            { ar: "سباحة", en: "swim" },
            { ar: "رقص", en: "dance" },
            { ar: "غناء", en: "sing" },
            { ar: "ضحك", en: "laugh" },
            { ar: "بكاء", en: "cry" },
            { ar: "قراءة", en: "read" },
            { ar: "كتابة", en: "write" },
            { ar: "استماع", en: "listen" },
            { ar: "تحدث", en: "speak" },
            { ar: "كلام", en: "talk" },
            { ar: "سماع", en: "hear" },
            { ar: "رؤية", en: "see" },
            { ar: "لمس", en: "touch" },
            { ar: "شعور", en: "feel" },
            { ar: "تفكير", en: "think" },
            { ar: "اعتقاد", en: "believe" },
            { ar: "معرفة", en: "know" },
            { ar: "فهم", en: "understand" },
            { ar: "تعلم", en: "learn" },
            { ar: "تعليم", en: "teach" },
            { ar: "دراسة", en: "study" },
            { ar: "تذكر", en: "remember" },
            { ar: "نسيان", en: "forget" },
            { ar: "شراء", en: "buy" },
            { ar: "بيع", en: "sell" },
            { ar: "دفع", en: "pay" },
            { ar: "اقتراض", en: "borrow" },
            { ar: "إقراض", en: "lend" },
            { ar: "فتح", en: "open" },
            { ar: "إغلاق", en: "close" },
            { ar: "بدء", en: "start" },
            { ar: "توقف", en: "stop" },
            { ar: "ذهاب", en: "go" },
            { ar: "مجيء", en: "come" },
            { ar: "مغادرة", en: "leave" },
            { ar: "وصول", en: "arrive" },
            { ar: "قيادة", en: "drive" },
            { ar: "ركوب", en: "ride" },
            { ar: "طيران", en: "fly" },
            { ar: "سفر", en: "travel" },
            { ar: "مشي", en: "walk" },
            { ar: "جري", en: "run" },
            { ar: "قفز", en: "jump" },
            { ar: "وقوف", en: "stand" },
            { ar: "جلوس", en: "sit" },
            { ar: "استلقاء", en: "lie down" },
            { ar: "نوم", en: "sleep" },
            { ar: "استيقاظ", en: "wake up" },
            { ar: "حلم", en: "dream" },
            { ar: "أكل", en: "eat" },
            { ar: "شرب", en: "drink" },
            { ar: "طبخ", en: "cook" },
            { ar: "قطع", en: "cut" },
            { ar: "غسل", en: "wash" },
            { ar: "تنظيف", en: "clean" },
            { ar: "تجفيف", en: "dry" },
            { ar: "كي", en: "iron" },
            { ar: "طي", en: "fold" },
            { ar: "ارتداء", en: "wear" },
            { ar: "خلع", en: "take off" },
            { ar: "دفع", en: "push" },
            { ar: "سحب", en: "pull" },
            { ar: "رفع", en: "lift" },
            { ar: "رمي", en: "throw" },
            { ar: "إمساك", en: "catch" },
            { ar: "حمل", en: "hold" },
            { ar: "بناء", en: "build" },
            { ar: "إصلاح", en: "fix" },
            { ar: "كسر", en: "break" },
            { ar: "إيجاد", en: "find" },
            { ar: "فقدان", en: "lose" },
            { ar: "إعطاء", en: "give" },
            { ar: "استلام", en: "receive" },
            { ar: "إرسال", en: "send" },
            { ar: "إحضار", en: "bring" },
            { ar: "أخذ", en: "take" },
            { ar: "عرض", en: "show" },
            { ar: "إخفاء", en: "hide" },
            { ar: "لقاء", en: "meet" },
            { ar: "زيارة", en: "visit" },
            { ar: "مكالمة", en: "call" },
            { ar: "دعوة", en: "invite" },
            { ar: "احتفال", en: "celebrate" },
            { ar: "فوز", en: "win" },
            { ar: "خسارة", en: "lose" },
            { ar: "لعب", en: "play" },
            { ar: "عمل", en: "work" },
            { ar: "راحة", en: "rest" },
            { ar: "دراسة", en: "study" },
            { ar: "تعليم", en: "teach" },
            { ar: "رسم", en: "draw" },
            { ar: "طلاء", en: "paint" },
            { ar: "غناء", en: "sing" },
            { ar: "رقص", en: "dance" },
            { ar: "صراخ", en: "shout" },
            { ar: "همس", en: "whisper" },
            { ar: "ابتسامة", en: "smile" },
            { ar: "عبوس", en: "frown" },
            { ar: "ضحك", en: "laugh" },
            { ar: "بكاء", en: "cry" },
            { ar: "استمتاع", en: "enjoy" },
            { ar: "يحب", en: "like" },
            { ar: "لا يحب", en: "dislike" },
            { ar: "كره", en: "hate" },
            { ar: "حب", en: "love" },
            { ar: "ثقة", en: "trust" },
            { ar: "أمل", en: "hope" },
            { ar: "خوف", en: "fear" },
            { ar: "غضب", en: "anger" },
            { ar: "حزن", en: "sadness" },
            { ar: "سعادة", en: "happiness" },
            { ar: "مفاجأة", en: "surprise" },
            { ar: "حماس", en: "excitement" },
            { ar: "ملل", en: "boredom" },
            { ar: "صبر", en: "patience" },
            { ar: "شجاعة", en: "courage" },
            { ar: "صدق", en: "honesty" },
            { ar: "لطف", en: "kindness" },
            { ar: "احترام", en: "respect" },
            { ar: "حكمة", en: "wisdom" },
            { ar: "جمال", en: "beauty" },
            { ar: "قوة", en: "strength" },
            { ar: "ضعف", en: "weakness" },
            { ar: "نجاح", en: "success" },
            { ar: "فشل", en: "failure" },
            { ar: "صحة", en: "health" },
            { ar: "مرض", en: "sickness" },
            { ar: "دواء", en: "medicine" },
            { ar: "طبيب", en: "doctor" },
            { ar: "ممرضة", en: "nurse" },
            { ar: "مستشفى", en: "hospital" },
            { ar: "ألم", en: "pain" },
            { ar: "إصابة", en: "injury" },
            { ar: "علاج", en: "treatment" },
            { ar: "شفاء", en: "recovery" },
            { ar: "تمارين", en: "exercise" },
                        { ar: "حمية", en: "diet" },
            { ar: "وزن", en: "weight" },
            { ar: "طول", en: "height" },
            { ar: "عمر", en: "age" },
            { ar: "ولادة", en: "birth" },
            { ar: "وفاة", en: "death" },
            { ar: "حياة", en: "life" },
            { ar: "مستقبل", en: "future" },
            { ar: "ماضي", en: "past" },
            { ar: "حاضر", en: "present" },
            { ar: "هدف", en: "goal" },
            { ar: "حلم", en: "dream" },
            { ar: "خطة", en: "plan" },
            { ar: "قرار", en: "decision" },
            { ar: "اختيار", en: "choice" },
            { ar: "فرصة", en: "chance" },
            { ar: "مخاطرة", en: "risk" },
            { ar: "حظ", en: "luck" },
            { ar: "فرصة", en: "opportunity" },
            { ar: "تحدي", en: "challenge" },
            { ar: "أمل", en: "hope" },
            { ar: "نصر", en: "victory" },
            { ar: "هزيمة", en: "defeat" },
            { ar: "معركة", en: "battle" },
            { ar: "حرب", en: "war" },
            { ar: "سلام", en: "peace" },
            { ar: "حرية", en: "freedom" },
            { ar: "عدالة", en: "justice" },
            { ar: "مساواة", en: "equality" },
            { ar: "قانون", en: "law" },
            { ar: "حكومة", en: "government" },
            { ar: "ديمقراطية", en: "democracy" },
            { ar: "ملك", en: "king" },
            { ar: "ملكة", en: "queen" },
            { ar: "رئيس", en: "president" },
            { ar: "وزير", en: "minister" },
            { ar: "مواطن", en: "citizen" },
            { ar: "دولة", en: "country" },
            { ar: "مدينة", en: "city" },
            { ar: "بلدة", en: "town" },
            { ar: "قرية", en: "village" },
            { ar: "شارع", en: "street" },
            { ar: "طريق", en: "road" },
            { ar: "جسر", en: "bridge" },
            { ar: "مبنى", en: "building" },
            { ar: "منزل", en: "house" },
            { ar: "شقة", en: "apartment" },
            { ar: "مكتب", en: "office" },
            { ar: "مدرسة", en: "school" },
            { ar: "جامعة", en: "university" },
            { ar: "مكتبة", en: "library" },
            { ar: "بنك", en: "bank" },
            { ar: "متجر", en: "shop" },
            { ar: "سوق", en: "market" },
            { ar: "مطعم", en: "restaurant" },
            { ar: "مقهى", en: "cafe" },
            { ar: "فندق", en: "hotel" },
            { ar: "حديقة", en: "park" },
            { ar: "متحف", en: "museum" },
            { ar: "مطار", en: "airport" },
            { ar: "محطة", en: "station" },
            { ar: "قطار", en: "train" },
            { ar: "حافلة", en: "bus" },
            { ar: "تاكسي", en: "taxi" },
            { ar: "دراجة", en: "bicycle" },
            { ar: "سيارة", en: "car" },
            { ar: "طائرة", en: "plane" },
            { ar: "قارب", en: "boat" },
            { ar: "سفينة", en: "ship" },
            { ar: "مترو", en: "subway" },
            { ar: "تذكرة", en: "ticket" },
            { ar: "جواز سفر", en: "passport" },
            { ar: "تأشيرة", en: "visa" },
            { ar: "حقائب سفر", en: "luggage" },
            { ar: "خريطة", en: "map" },
            { ar: "سائح", en: "tourist" },
            { ar: "مرشد", en: "guide" },
            { ar: "كاميرا", en: "camera" },
            { ar: "صورة", en: "photo" },
            { ar: "فيلم", en: "film" },
            { ar: "موسيقى", en: "music" },
            { ar: "أغنية", en: "song" },
            { ar: "رقص", en: "dance" },
            { ar: "آلة موسيقية", en: "instrument" },
            { ar: "غيتار", en: "guitar" },
            { ar: "بيانو", en: "piano" },
            { ar: "طبلة", en: "drum" },
            { ar: "كمان", en: "violin" },
            { ar: "فنان", en: "artist" },
            { ar: "ممثل", en: "actor" },
            { ar: "مغني", en: "singer" },
            { ar: "كاتب", en: "writer" },
            { ar: "شاعر", en: "poet" },
            { ar: "كتاب", en: "book" },
            { ar: "قصة", en: "story" },
            { ar: "قصيدة", en: "poem" },
            { ar: "لوحة", en: "painting" },
            { ar: "رسم", en: "drawing" },
            { ar: "فيلم", en: "film" },
            { ar: "مسرح", en: "theater" },
            { ar: "خشبة المسرح", en: "stage" },
            { ar: "جمهور", en: "audience" },
            { ar: "حفل موسيقي", en: "concert" },
            { ar: "معرض", en: "exhibition" },
            { ar: "مهرجان", en: "festival" },
            { ar: "حدث", en: "event" },
            { ar: "احتفال", en: "celebration" },
            { ar: "حفلة", en: "party" },
            { ar: "عطلة", en: "holiday" },
            { ar: "عيد ميلاد", en: "birthday" }
        ];

        let currentWord, score, timeLeft, timer, isArabic, streak = 0, difficulty = 'medium', gameMode = 'normal';
        const leaderboard = [];
        const achievements = [
            { name: "مترجم مبتدئ", description: "ترجم 10 كلمات بشكل صحيح", achieved: false },
            { name: "مترجم متوسط", description: "ترجم 50 كلمة بشكل صحيح", achieved: false },
            { name: "مترجم محترف", description: "ترجم 100 كلمة بشكل صحيح", achieved: false },
            { name: "سلسلة ذهبية", description: "حقق سلسلة من 10 إجابات صحيحة متتالية", achieved: false },
            { name: "سرعة البرق", description: "أكمل جولة في أقل من 30 ثانية", achieved: false }
        ];

        const wordDisplay = document.getElementById('word-display');
        const translationInput = document.getElementById('translation-input');
        const submitBtn = document.getElementById('submit-btn');
        const startBtn = document.getElementById('start-btn');
        const scoreDisplay = document.getElementById('score');
        const timerDisplay = document.getElementById('timer');
        const streakDisplay = document.getElementById('streak');
        const hintBtn = document.getElementById('hint-btn');
        const listenBtn = document.getElementById('listen-btn');
        const leaderboardList = document.getElementById('leaderboard-list');
        const achievementsList = document.getElementById('achievements-list');
        const themeToggle = document.getElementById('theme-toggle');
        const shareBtn = document.getElementById('share-btn');
        const customWordsBtn = document.getElementById('custom-words-btn');
        const difficultyBtns = document.querySelectorAll('#difficulty-selector button');
        const gameModeBtns = document.querySelectorAll('#game-mode-selector button');
        const progressBar = document.getElementById('progress');

        const sounds = {
            correct: new Howl({ src: ['https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3'] }),
            wrong: new Howl({ src: ['https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3'] }),
            gameOver: new Howl({ src: ['https://assets.mixkit.co/sfx/preview/mixkit-game-over-trombone-1940.mp3'] })
        };

        function startGame() {
            score = 0;
            timeLeft = gameMode === 'timeAttack' ? 30 : 60;
            streak = 0;
            updateScore();
            updateStreak();
            nextWord();
            startTimer();
            startBtn.style.display = 'none';
            submitBtn.style.display = 'inline';
            translationInput.style.display = 'inline';
            hintBtn.style.display = 'inline';
            listenBtn.style.display = 'inline';
            updateProgressBar();
        }

        function nextWord() {
            currentWord = words[Math.floor(Math.random() * words.length)];
            isArabic = Math.random() < 0.5;
            wordDisplay.textContent = isArabic ? currentWord.ar : currentWord.en;
            wordDisplay.classList.add('fade-in');
            setTimeout(() => wordDisplay.classList.remove('fade-in'), 500);
            translationInput.value = '';
            translationInput.focus();
        }

        function checkTranslation() {
            const userTranslation = translationInput.value.trim().toLowerCase();
            const correctTranslation = isArabic ? currentWord.en : currentWord.ar;
            
            if (userTranslation === correctTranslation) {
                score += 10 + streak * 2;
                streak++;
                updateScore();
                updateStreak();
                wordDisplay.classList.add('bounce');
                sounds.correct.play();
                setTimeout(() => wordDisplay.classList.remove('bounce'), 500);
                checkAchievements();
            } else {
                streak = 0;
                updateStreak();
                wordDisplay.classList.add('shake');
                sounds.wrong.play();
                setTimeout(() => wordDisplay.classList.remove('shake'), 500);
            }
            nextWord();
            updateProgressBar();
        }

        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            timerDisplay.textContent = `الوقت: ${timeLeft} ثانية`;
        }

        function updateScore() {
            scoreDisplay.textContent = `النتيجة: ${score}`;
        }

        function updateStreak() {
            streakDisplay.textContent = streak > 0 ? `سلسلة: ${streak}` : '';
        }

        function updateProgressBar() {
            const progress = (score / 100) * 100; // Assuming 100 is the target score
            progressBar.style.width = `${progress}%`;
        }

        function endGame() {
            clearInterval(timer);
            sounds.gameOver.play();
            wordDisplay.textContent = `انتهت اللعبة! نتيجتك: ${score}`;
            submitBtn.style.display = 'none';
            startBtn.style.display = 'inline';
            translationInput.style.display = 'none';
            hintBtn.style.display = 'none';
            listenBtn.style.display = 'none';
            updateLeaderboard(score);
            checkAchievements();
        }

        function showHint() {
            const correctTranslation = isArabic ? currentWord.en : currentWord.ar;
            const hintLength = Math.floor(correctTranslation.length / 2);
            const hint = correctTranslation.substring(0, hintLength) + '...';
            alert(`تلميح: ${hint}`);
        }

        function listenToWord() {
            const utterance = new SpeechSynthesisUtterance(isArabic ? currentWord.en : currentWord.ar);
            utterance.lang = isArabic ? 'en-US' : 'ar-SA';
            speechSynthesis.speak(utterance);
        }

        function updateLeaderboard(newScore) {
            leaderboard.push(newScore);
            leaderboard.sort((a, b) => b - a);
            leaderboard.splice(5);
            displayLeaderboard();
        }

        function displayLeaderboard() {
            leaderboardList.innerHTML = '';
            leaderboard.forEach((score, index) => {
                const li = document.createElement('li');
                li.textContent = `${score} نقطة`;
                leaderboardList.appendChild(li);
            });
        }

        function checkAchievements() {
            achievements.forEach(achievement => {
                if (!achievement.achieved) {
                    switch (achievement.name) {
                        case "مترجم مبتدئ":
                            if (score >= 100) achievement.achieved = true;
                            break;
                        case "مترجم متوسط":
                            if (score >= 500) achievement.achieved = true;
                            break;
                        case "مترجم محترف":
                            if (score >= 1000) achievement.achieved = true;
                            break;
                        case "سلسلة ذهبية":
                            if (streak >= 10) achievement.achieved = true;
                            break;
                        case "سرعة البرق":
                            if (gameMode === 'timeAttack' && timeLeft > 30) achievement.achieved = true;
                            break;
                    }
                }
            });
            displayAchievements();
        }

        function displayAchievements() {
            achievementsList.innerHTML = '';
            achievements.forEach(achievement => {
                const li = document.createElement('li');
                li.textContent = `${achievement.name}: ${achievement.description}`;
                if (achievement.achieved) {
                    li.classList.add('text-green-500');
                    li.textContent += ' (تم الإنجاز)';
                }
                achievementsList.appendChild(li);
            });
        }

        function toggleTheme() {
            document.body.classList.toggle('dark');
        }

                function shareResult() {
            const text = `لقد حصلت على ${score} نقطة في لعبة الترجمة العربية-الإنجليزية!`;
            if (navigator.share) {
                navigator.share({
                    title: 'نتيجتي في لعبة الترجمة',
                    text: text,
                    url: window.location.href
                }).then(() => console.log('تمت المشاركة بنجاح'))
                .catch((error) => console.log('خطأ في المشاركة', error));
            } else {
                alert(text);
            }
        }

        function setDifficulty(newDifficulty) {
            difficulty = newDifficulty;
            difficultyBtns.forEach(btn => {
                btn.classList.remove('ring-2', 'ring-white');
                if (btn.dataset.difficulty === difficulty) {
                    btn.classList.add('ring-2', 'ring-white');
                }
            });
            adjustGameSettings();
        }

        function setGameMode(newMode) {
            gameMode = newMode;
            gameModeBtns.forEach(btn => {
                btn.classList.remove('ring-2', 'ring-white');
                if (btn.dataset.mode === gameMode) {
                    btn.classList.add('ring-2', 'ring-white');
                }
            });
            adjustGameSettings();
        }

        function adjustGameSettings() {
            switch (difficulty) {
                case 'easy':
                    timeLeft = 90;
                    break;
                case 'medium':
                    timeLeft = 60;
                    break;
                case 'hard':
                    timeLeft = 45;
                    break;
                case 'expert':
                    timeLeft = 30;
                    break;
            }

            switch (gameMode) {
                case 'normal':
                    // Normal settings are already set
                    break;
                case 'timeAttack':
                    timeLeft = 30;
                    break;
                case 'survival':
                    timeLeft = Infinity;
                    break;
            }

            updateTimerDisplay();
        }

        function addCustomWords() {
            const customWord = prompt("أدخل الكلمة بالعربية:");
            const customTranslation = prompt("أدخل الترجمة بالإنجليزية:");
            if (customWord && customTranslation) {
                words.push({ ar: customWord, en: customTranslation });
                alert("تمت إضافة الكلمة بنجاح!");
            }
        }

        startBtn.addEventListener('click', startGame);
        submitBtn.addEventListener('click', checkTranslation);
        hintBtn.addEventListener('click', showHint);
        listenBtn.addEventListener('click', listenToWord);
        themeToggle.addEventListener('click', toggleTheme);
        shareBtn.addEventListener('click', shareResult);
        customWordsBtn.addEventListener('click', addCustomWords);

        translationInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkTranslation();
            }
        });

        difficultyBtns.forEach(btn => {
            btn.addEventListener('click', () => setDifficulty(btn.dataset.difficulty));
        });

        gameModeBtns.forEach(btn => {
            btn.addEventListener('click', () => setGameMode(btn.dataset.mode));
        });

        // تهيئة اللعبة
        submitBtn.style.display = 'none';
        translationInput.style.display = 'none';
        hintBtn.style.display = 'none';
        listenBtn.style.display = 'none';
        setDifficulty('medium');
        setGameMode('normal');
        displayAchievements();

        // إضافة دعم للغات الإضافية
        const languages = [
            { code: 'ar', name: 'العربية' },
            { code: 'en', name: 'English' },
            { code: 'fr', name: 'Français' },
            { code: 'es', name: 'Español' }
        ];

        function createLanguageSelector() {
            const selector = document.createElement('select');
            selector.id = 'language-selector';
            selector.classList.add('mt-4', 'p-2', 'rounded-lg');
            
            languages.forEach(lang => {
                const option = document.createElement('option');
                option.value = lang.code;
                option.textContent = lang.name;
                selector.appendChild(option);
            });

            selector.addEventListener('change', (e) => {
                changeLanguage(e.target.value);
            });

            document.getElementById('game-container').appendChild(selector);
        }

        function changeLanguage(langCode) {
            // Here you would implement the logic to change the game's language
            // This might involve loading new word sets, changing UI text, etc.
            console.log(`Changing language to ${langCode}`);
        }

        createLanguageSelector();

        // Implement AI difficulty adjustment
        let userPerformance = [];

        function updateAIDifficulty() {
            const recentPerformance = userPerformance.slice(-10);
            const averageScore = recentPerformance.reduce((sum, score) => sum + score, 0) / recentPerformance.length;

            if (averageScore > 80) {
                setDifficulty('hard');
            } else if (averageScore < 40) {
                setDifficulty('easy');
            } else {
                setDifficulty('medium');
            }
        }

        function recordPerformance(score) {
            userPerformance.push(score);
            if (userPerformance.length > 20) {
                userPerformance.shift();
            }
            updateAIDifficulty();
        }

        // Call this function at the end of each game
        function endGameWithAI() {
            endGame();
            recordPerformance(score);
        }

        // Replace the original endGame call with this new function
        // For example, in the timer function:
        // if (timeLeft <= 0) {
        //     endGameWithAI();
        // }

        // Add multiplayer functionality
        let roomId = null;
        let isMultiplayer = false;

        function createMultiplayerRoom() {
            // In a real implementation, this would create a room on a server
            roomId = Math.random().toString(36).substring(7);
            isMultiplayer = true;
            alert(`Room created! Room ID: ${roomId}`);
        }

        function joinMultiplayerRoom() {
            const joinRoomId = prompt("Enter the room ID to join:");
            if (joinRoomId) {
                // In a real implementation, this would connect to an existing room
                roomId = joinRoomId;
                isMultiplayer = true;
                alert(`Joined room ${roomId}`);
            }
        }

        // Add buttons for multiplayer
        const createRoomBtn = document.createElement('button');
        createRoomBtn.textContent = 'إنشاء غرفة متعددة اللاعبين';
        createRoomBtn.classList.add('btn', 'bg-purple-500', 'text-white', 'px-4', 'py-2', 'rounded-lg', 'mt-4');
        createRoomBtn.addEventListener('click', createMultiplayerRoom);

        const joinRoomBtn = document.createElement('button');
        joinRoomBtn.textContent = 'الانضمام إلى غرفة متعددة اللاعبين';
        joinRoomBtn.classList.add('btn', 'bg-indigo-500', 'text-white', 'px-4', 'py-2', 'rounded-lg', 'mt-4', 'ml-4');
        joinRoomBtn.addEventListener('click', joinMultiplayerRoom);

        document.getElementById('game-container').appendChild(createRoomBtn);
        document.getElementById('game-container').appendChild(joinRoomBtn);

        // Initialize the game
        displayLeaderboard();
    </script>
</body>
</html>